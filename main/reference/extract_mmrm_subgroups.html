<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extraction of MMRM Subgroup Results based on Population Model Definition — extract_mmrm_subgroups • tern.mmrm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extraction of MMRM Subgroup Results based on Population Model Definition — extract_mmrm_subgroups"><meta name="description" content="
This prepares LS mean estimates and contrasts for a specific visit and treatment
arm relative to the reference arm, along with a list of subgroup variables and corresponding
(grouped) factor levels."><meta property="og:description" content="
This prepares LS mean estimates and contrasts for a specific visit and treatment
arm relative to the reference arm, along with a list of subgroup variables and corresponding
(grouped) factor levels."><link rel="stylesheet" href="../consent.css"><script src="../consent.js" type="text/javascript" charset="utf-8"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tern.mmrm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.9003</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">Introduction to tern.mmrm</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/tern.mmrm"><span class="fa fa-github"></span></a></li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern.mmrm/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern.mmrm/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern.mmrm/v0.3.1">v0.3.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern.mmrm/v0.3.0">v0.3.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/tern.mmrm/v0.2.1">v0.2.1</a> </div></li>
<!-- end dropdown for versions -->
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extraction of MMRM Subgroup Results based on Population Model Definition</h1>
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/tern.mmrm/blob/main/R/subgroups.R" class="external-link"><code>R/subgroups.R</code></a></small>
      <div class="d-none name"><code>extract_mmrm_subgroups.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>This prepares LS mean estimates and contrasts for a specific visit and treatment
arm relative to the reference arm, along with a list of subgroup variables and corresponding
(grouped) factor levels.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_mmrm_subgroups</span><span class="op">(</span></span>
<span>  <span class="va">fit</span>,</span>
<span>  <span class="va">visit</span>,</span>
<span>  subgroups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  groups_lists <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  treatment_arm <span class="op">=</span> <span class="va">fit</span><span class="op">$</span><span class="va">treatment_levels</span><span class="op">[</span><span class="fl">1L</span><span class="op">]</span>,</span>
<span>  label_all <span class="op">=</span> <span class="st">"All Patients"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fit">fit<a class="anchor" aria-label="anchor" href="#arg-fit"></a></dt>
<dd><p>(<code>tern_mmrm</code>)<br> model fit on the total population.</p></dd>


<dt id="arg-visit">visit<a class="anchor" aria-label="anchor" href="#arg-visit"></a></dt>
<dd><p>(<code>string</code>)<br> single visit or name of averages of visits (referring
to the averages specified when creating the <code>fit</code>).</p></dd>


<dt id="arg-subgroups">subgroups<a class="anchor" aria-label="anchor" href="#arg-subgroups"></a></dt>
<dd><p>(<code>character</code> or <code>NULL</code>)<br> names of subgroup variables to use in the
forest plot, these need to be factors.</p></dd>


<dt id="arg-groups-lists">groups_lists<a class="anchor" aria-label="anchor" href="#arg-groups-lists"></a></dt>
<dd><p>(named <code>list</code> of <code>list</code>)<br> optionally contains for each
<code>subgroups</code> variable a list, which specifies groups of factor levels, see
details.</p></dd>


<dt id="arg-treatment-arm">treatment_arm<a class="anchor" aria-label="anchor" href="#arg-treatment-arm"></a></dt>
<dd><p>(<code>string</code>)<br> single treatment arm to compare with the reference
arm.</p></dd>


<dt id="arg-label-all">label_all<a class="anchor" aria-label="anchor" href="#arg-label-all"></a></dt>
<dd><p>(<code>string</code>)<br> label for the total population analysis.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with two elements:</p><ul><li><p><code>estimates</code>: <code>data.frame</code> with columns <code>arm</code>, <code>n</code>, <code>lsmean</code>, <code>subgroup</code>,
<code>var</code>, <code>var_label</code>, <code>row_type</code>, containing the LS means results for
the overall population and the specified subgroups.</p></li>
<li><p><code>contrasts</code>: <code>data.frame</code> with columns <code>n_tot</code>, <code>diff</code>, <code>lcl</code>, <code>ucl</code>,
<code>pval</code>, <code>subgroup</code>, <code>var</code>, <code>var_label</code>, <code>row_type</code>. Note
that this has half the number of rows as <code>estimates</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>groups_lists</code> argument is handy when you don't want to have
subgroups identical to the original levels of the factor variable. This might
be the case when you want to merge levels into a single subgroup, define
overlapping subgroups or omit levels completely. Then you insert an element into
<code>groups_lists</code> with the name of the <code>subgroups</code> variable and containing
as a named list the subgroup definitions. See the example below.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>If the original model <code>vars</code> include <code>covariates</code> which are used here in
<code>subgroups</code> then these are dropped from <code>covariates</code> before the corresponding
model is fitted.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">mmrm_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="fit_mmrm.html">fit_mmrm</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    response <span class="op">=</span> <span class="st">"FEV1"</span>,</span></span>
<span class="r-in"><span>    covariates <span class="op">=</span> <span class="st">"RACE"</span>,</span></span>
<span class="r-in"><span>    id <span class="op">=</span> <span class="st">"USUBJID"</span>,</span></span>
<span class="r-in"><span>    arm <span class="op">=</span> <span class="st">"ARMCD"</span>,</span></span>
<span class="r-in"><span>    visit <span class="op">=</span> <span class="st">"AVISIT"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">mmrm_test_data</span>,</span></span>
<span class="r-in"><span>  cor_struct <span class="op">=</span> <span class="st">"compound symmetry"</span>,</span></span>
<span class="r-in"><span>  weights_emmeans <span class="op">=</span> <span class="st">"equal"</span>,</span></span>
<span class="r-in"><span>  averages_emmeans <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"VIS1+2"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VIS1"</span>, <span class="st">"VIS2"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">extract_mmrm_subgroups</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fit <span class="op">=</span> <span class="va">mmrm_results</span>,</span></span>
<span class="r-in"><span>  visit <span class="op">=</span> <span class="st">"VIS3"</span>,</span></span>
<span class="r-in"><span>  subgroups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RACE"</span>, <span class="st">"SEX"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  groups_lists <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    RACE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Asian"</span>, <span class="st">"White"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Black or African American"</span>, <span class="st">"White"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $estimates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    arm  n   lsmean     subgroup  var    var_label row_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  PBO 71 43.65406 All Patients  ALL All Patients  content</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  TRT 58 46.49354 All Patients  ALL All Patients  content</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  PBO 42 43.21069            A RACE         RACE analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  TRT 45 46.71975            A RACE         RACE analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  PBO 44 43.91593            B RACE         RACE analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  TRT 34 48.26624            B RACE         RACE analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  PBO 35 42.96082         Male  SEX          SEX analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  TRT 23 46.69734         Male  SEX          SEX analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  PBO 36 44.20545       Female  SEX          SEX analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 TRT 35 46.37633       Female  SEX          SEX analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $contrasts</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_tot     diff        lcl      ucl        pval conf_level     subgroup  var</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   129 2.839483  0.5272786 5.151687 0.016186861       0.95 All Patients  ALL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    87 3.509059  0.5556453 6.462472 0.020028651       0.95            A RACE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    78 4.350311  1.2151941 7.485427 0.006681578       0.95            B RACE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    58 3.736513  0.2280817 7.244945 0.036955568       0.95         Male  SEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    71 2.170876 -0.9742635 5.316015 0.175312081       0.95       Female  SEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      var_label row_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 All Patients  content</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         RACE analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         RACE analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          SEX analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          SEX analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="nest">
  <p>tern.mmrm is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer></div>





  </body></html>

